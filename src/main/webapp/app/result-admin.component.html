<div class="container">
    <h3>List of Results</h3>
    <p-dataTable [value]="results" [rows]="10" [paginator]="true" [rowsPerPageOptions]="pageSizes" [globalFilter]="globalFilter" reorderableColumns="true" class="table">
        <p-column field="id" header="Id" sortable="true" [style]="{'width':'10%'}"></p-column>
        <p-column field="testId" header="Test Id" sortable="true" [style]="{'width':'10%'}"></p-column>
        <p-column field="testName" header="Test name" sortable="true" [style]="{'width':'50%'}"></p-column>
        <p-column field="testTaken" header="Testing Date" sortable="true" [style]="{'width':'20%'}">
            <template let-col let-result="rowData" pTemplate="body">
                {{result[col.field]|date }}
            </template>
        </p-column>
        <p-column field="evaluation" header="Evaluation" [style]="{'width':'10%'}">
            <template let-result="rowData" pTemplate="body">
                <span>{{result.evaluation === 0 ? '0' : '1'}}</span>
            </template>
        </p-column>
        <p-column field="supervisedValue" header="Supervised Value" [style]="{'width':'10%'}">
            <template let-result="rowData" pTemplate="body">
                <p-checkbox binary="true" [(ngModel)]="result.supervisedValue" (onChange)="toggleSupervised(result)"></p-checkbox>
                <span>{{result.supervisedValue === null ? 'not defined' : ''}}</span>
            </template>
        </p-column>
        <p-column field="userId" header="User Id" [style]="{'width':'10%'}"></p-column>
        <p-column field="Actions" [style]="{'width':'15%'}">
            <template let-object="rowData" pTemplate="body">
					<button class="btn btn-warning edit-button" (click)="viewModal(object,viewAnswersModal)">
						<span class="glyphicon glyphicon-film"></span>
                    </button>
                    <button class="btn btn-danger delete-button" (click)="deleteResultModal(object, deleteModal)">
						<span class="glyphicon glyphicon-trash"></span>
					</button>
			</template>
        </p-column>
    </p-dataTable>


    <div bsModal #viewAnswersModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
        <div class="modal-content modal-dialog modal-md modal-dialog-center">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="viewAnswersModal.hide()">
						<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
				</button>
                <h4 class="modal-title">View Answer</h4>
            </div>
            <div class="modal-body">
                <p-dataTable [value]="answers" [rows]="10" [paginator]="true" [rowsPerPageOptions]="pageSizes" [globalFilter]="globalFilter" reorderableColumns="true" class="table">
                    <p-column field="answerNumber" header="Slide number" [style]="{'width':'10%'}"></p-column>
                    <p-column field="slideName" header="Slide Name" [style]="{'width':'20%'}"></p-column>
                    <p-column field="answerDuration" header="Answer duration [ms]" [style]="{'width':'10%'}"></p-column>
                    <!-- <p-column field="primeTestDuration" header="Prime-Stim duration [ms]" [style]="{'width':'10%'}"></p-column> -->
                    <p-column field="answerValue" header="Answer value" [style]="{'width':'10%'}"></p-column>
                </p-dataTable>
            </div>
        </div>
    </div>

    <div bsModal #deleteModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
        <div *ngIf="result" class="modal-dialog modal-md modal-dialog-center">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" aria-label="Close" (click)="deleteModal.hide()">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</button>
                    <h4 class="modal-title">Confirm delte</h4>
                </div>
                <div class="modal-body">
                    <div style="margin-top:5px;">
                        <p><b>Test name:</b> {{result.testName}}</p>
                        <p><b>Result id:</b> {{result.id}}</p>
                        <p><b>Supervised value:</b> {{result.supervisedValue}}</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default modal-cancel" (click)="deleteModal.hide();$event.stopPropagation()">Cancel</button>
                    <button class="btn btn-primary modal-delete" (click)="deleteResult(result, deleteModal);$event.stopPropagation()">Confirm delete</button>
                </div>
            </div>
        </div>
    </div>
</div>